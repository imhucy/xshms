<!--Start Breadcrumb-->
<div class="row">
	<div id="breadcrumb" class="col-xs-12">
		<ol class="breadcrumb">
			<li><a href="index.html">主 页</a></li>
			<li><a href="javascript:;">系统管理</a></li>
			<li><a href="javascript:;">用户管理</a></li>
		</ol>
	</div>
</div>
<!--End Breadcrumb-->
<div class="row">
	<div class="col-xs-12">
		<div class="box">
			<div class="box-content editable-table">
				<h4 class="fb">说明如下</h4>
				<ol>
					<li>点击表头可以按该列排序，默认按首列排序</li>
					<li>在表头输入数据可以进行数据检索</li>
					<li>删除后数据不可恢复，请慎重操作</li>
					<li>刚添加的数据无法立即修改，请刷新后重试</li>
				</ol>
				<hr>
				<button class="btn btn-info" id="addBtn"> 添 加 <i class="fa fa-plus"></i></button>
				<button class="btn btn-info" id="modifyBtn"> 修 改 <i class="fa fa-pencil"></i></button>
				<button class="btn btn-info" id="removeBtn"> 删 除 <i class="fa fa-trash-o"></i></button>
				<table class="table table-bordered table-striped table-hover table-heading table-datatable" id="datatable-user">
					<thead>
						<tr>
							<th><label><input type="hidden" name="id" /></label></th>
							<th><label><input type="text" name="login_name" value="登录名" class="search_init" /></label></th>
							<th><label><input type="text" name="useres_name" value="姓名" class="search_init" /></label></th>
							<th><label><input type="text" name="dept_id" data-select="dept" value="所属部门" class="search_init" /></label></th>
							<th><label><input type="text" name="role_id" data-select="role" value="用户角色" class="search_init" /></label></th>
							<th><label><input type="text" name="status_id" data-select="user_status" value="用户状态" class="search_init" /></label></th>
							
							<th><label><input type="text" name="usr_birth" data-date="true" value="出生日期" class="search_init" /></label></th>
							<th><label><input type="text" name="usr_qq" value="QQ" class="search_init" /></label></th>
							<th><label><input type="text" name="usr_email" value="email" class="search_init" /></label></th>
							
							<th><label><input type="text" name="usr_addr" value="地址" class="search_init" /></label></th>
							<th><label><input type="text" name="usr_desc" value="用户介绍" class="search_init" /></label></th>
						</tr>
					</thead>
					<tbody>
						<!-- <tr>
							<td>admin</td>
							<td>administrator</td>
							<td>科技部</td>
							<td>审核通过</td>
							<td>超级管理员</td>
							<td>1994-10-28</td>
							<td>289856565</td>
							<td>289856565@qq.com</td>
							<td>湖南省邵阳市</td>
							<td>严谨务实</td>
							<td class="actions">
								<a href="javascript:;" class="btn btn-info hidden on-editing save-row"> 保 存 <i class="fa fa-save"></i></a>
								<a href="javascript:;" class="btn btn-info hidden on-editing cancel-row"> 取 消 <i class="fa fa-times"></i></a>
								<a href="javascript:;" class="btn btn-info on-default edit-row"> 修 改 <i class="fa fa-pencil"></i></a>
								<a href="javascript:;" class="btn btn-info on-default remove-row"> 删 除 <i class="fa fa-trash-o"></i></a>
							</td>
						</tr> -->

					</tbody>
					<tfoot>
						<tr>
							<th></th>
							<th>登录名</th>
							<th>姓名</th>
							<th>所属部门</th>
							<th>用户角色</th>
							<th>用户状态</th>
							<th>出生日期</th>
							<th>QQ</th>
							<th>Email</th>
							<th>地址</th>
							<th>用户介绍</th>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</div>
<div id="removeModal" class="modal fade" role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="container-fluid">
          <div class="row">
          	<div class="col-md-12">你确定要删除？</div>
          </div>
          <div class="row">
          	<div class="col-md-8"></div>
          	<div class="col-md-2">
          		<button type="button" class="btn btn-default btn-lg" data-dismiss="modal">取消</button>
          	</div>
          	<div class="col-md-2">
          		<button type="button" id="removeSureBtn" class="btn btn-primary btn-lg">确定</button>
          	</div>
          </div>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div id="successModal" class="modal fade" role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="container-fluid">
          <div class="row">
          	<div class="col-md-12">添加成功</div>
          </div>
          <div class="row">
          	<div class="col-md-10"></div>
          	<div class="col-md-2">
          		<button type="button" class="btn btn-primary btn-lg" data-dismiss="modal">确定</button>
          	</div>
          </div>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<script type="text/javascript">
// Run Datables plugin and create 3 variants of settings
function AllTables(){
	if ( !$.fn.dataTable.isDataTable( '#datatable-user' ) ){
		// EditabeTable2();
		EditabeTableModel({
			widths : [ 0,150,150,150,150,150,150,150,150,150,150 ]
			,dbTable : 'useres'
		});
	}
	LoadSelect2Script(MakeSelect2);
}
function MakeSelect2(){
	$('select').select2();
	$('.dataTables_filter').each(function(){
		$(this).find('input').attr('placeholder', '全表检索').addClass('form-control');
	});
}
$(document).ready(function() {
	$('.preloader').show();
	// $.get('/readAllUser',function(useres){
	$.get('/all/useres',function(useres){
		var users = $.parseJSON(useres);console.dir(users);

		var tBody = $('#datatable-user').find('tbody');

		for(var i = 0 ; i < users.length;i++){
			var user = users[i];
			var oTr = $('<tr></tr>');
			oTr.append('<td> <input type="hidden" value="'+user.id+'" /> </td>');
			oTr.append('<td>'+(user.login_name)+'</td>');
			oTr.append('<td>'+(user.useres_name||'-')+'</td>');
			oTr.append('<td>'+(user.dept_id||'-')+'</td>');
			oTr.append('<td>'+(user.role_id||'-')+'</td>');
			oTr.append('<td>'+(user.status_id||'-')+'</td>');
			oTr.append('<td>'+(user.usr_birth||'-')+'</td>');
			oTr.append('<td>'+(user.usr_qq||'-')+'</td>');
			oTr.append('<td>'+(user.usr_email||'-')+'</td>');
			oTr.append('<td>'+(user.usr_addr||'-')+'</td>');
			oTr.append('<td>'+(user.usr_desc||'-')+'</td>');
			tBody.append(oTr);
		}
		console.log(tBody.find('tr').size());
		// Load Datatables and run plugin on tables 
		// 等待数据加载完成再初始化
		LoadDataTablesScripts(AllTables);
		// $('.preloader').hide();
	});
	
	// Add Drag-n-Drop feature
	WinMove();
});

</script>